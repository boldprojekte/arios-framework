---
phase: 03-entry-points
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/arios-cli/templates/.claude/commands/arios/arios.md
  - packages/arios-cli/templates/.claude/commands/arios/status.md
autonomous: true

must_haves:
  truths:
    - "User can invoke /arios and see current state with next action suggestion"
    - "User can invoke /arios:status to see project position"
    - "Detection shows greenfield/brownfield with tech stack"
    - "Suggestions require user confirmation before proceeding"
  artifacts:
    - path: "packages/arios-cli/templates/.claude/commands/arios/arios.md"
      provides: "Smart entry point with state detection and routing"
      min_lines: 50
    - path: "packages/arios-cli/templates/.claude/commands/arios/status.md"
      provides: "Project status display command"
      min_lines: 30
  key_links:
    - from: "arios.md"
      to: ".arios/STATE.md"
      via: "@ file reference"
      pattern: "@\\.arios/STATE\\.md"
    - from: "status.md"
      to: ".arios/STATE.md"
      via: "@ file reference"
      pattern: "@\\.arios/STATE\\.md"
---

<objective>
Create the ARIOS smart entry point (/arios) and status command (/arios:status) that detect project state, show greenfield/brownfield classification, and suggest next actions with user confirmation.

Purpose: Users need a single entry point that understands project context and guides them to the right workflow, plus a status command to check position anytime.

Output: Two slash command files that provide state-aware navigation through ARIOS workflows.
</objective>

<execution_context>
@/Users/j.franke/.claude/get-shit-done/workflows/execute-plan.md
@/Users/j.franke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-entry-points/03-CONTEXT.md
@.planning/phases/03-entry-points/03-RESEARCH.md
@packages/arios-cli/templates/.claude/commands/arios/orchestrate.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create /arios smart entry point</name>
  <files>packages/arios-cli/templates/.claude/commands/arios/arios.md</files>
  <action>
Create the main /arios command following the Input-Workflow-Output template from PROJECT.md.

**Frontmatter:**
- description: Smart ARIOS entry - detects state and routes to appropriate workflow
- No model specified (use user's default)
- No tool restrictions needed

**Structure:**
1. Purpose: One-line description of detecting state and suggesting next action
2. Variables: None needed (all from state files)
3. Context section with bash detection:
   - Check .arios/ exists: `!ls .arios/ 2>/dev/null || echo "NO_ARIOS"`
   - Detect code files for greenfield/brownfield: `!find . -maxdepth 2 \( -name "*.ts" -o -name "*.tsx" -o -name "*.js" -o -name "*.jsx" -o -name "*.py" -o -name "*.go" -o -name "*.rs" \) ! -path "*/node_modules/*" ! -path "*/.git/*" 2>/dev/null | head -5`
   - Detect config files: `!ls package.json tsconfig.json requirements.txt go.mod Cargo.toml 2>/dev/null`
   - Load state if exists: @.arios/STATE.md
4. Instructions section with rules:
   - Always show detection result first ("Detected: Brownfield with TypeScript/React")
   - Show brief status line if ARIOS initialized ("Phase 2/5, Plan 1/3")
   - Suggest next action with confirmation prompt
   - Handle ambiguity by asking, not guessing
5. Workflow section with numbered steps:
   1. Check if .arios/ exists
   2. If no .arios/: detect greenfield/brownfield, suggest /arios:init
   3. If .arios/ exists: read STATE.md, determine position
   4. Suggest next action based on state (research/plan/execute)
   5. Wait for user confirmation before proceeding
   6. If confirmed: spawn orchestrator with appropriate mode
6. Report section showing format:
   - Detection result
   - Current position (if initialized)
   - Suggested action with confirmation prompt

Keep under 80 lines. Follow the lean prompt philosophy from PROJECT.md - leave room for Claude to think.
  </action>
  <verify>File exists at packages/arios-cli/templates/.claude/commands/arios/arios.md with frontmatter and all sections</verify>
  <done>The /arios command file exists with state detection, greenfield/brownfield classification, and routing logic that requires user confirmation</done>
</task>

<task type="auto">
  <name>Task 2: Create /arios:status command</name>
  <files>packages/arios-cli/templates/.claude/commands/arios/status.md</files>
  <action>
Create the /arios:status command following the Input-Workflow-Output template.

**Frontmatter:**
- description: Show ARIOS project status and suggest next action
- No model specified

**Structure:**
1. Purpose: Display current project position and what to do next
2. Variables: None
3. Context section:
   - Check .arios/ exists: `!ls .arios/ 2>/dev/null || echo "NO_ARIOS"`
   - Load state: @.arios/STATE.md
   - Load config: @.arios/config.json
4. Instructions:
   - If no .arios/: show "No ARIOS project. Use /arios:init"
   - Otherwise: show phase, plan, and progress
   - Always suggest next action inline (not boxed)
5. Workflow:
   1. Check for .arios/
   2. Read STATE.md and config.json
   3. Display position and progress
   4. Suggest next command
6. Report section with format:
   ```
   ARIOS Status

   Position: Phase X/Y, Plan M/N
   Project: [brownfield/greenfield]
   Stack: [detected from config]

   Next: [suggested command]
   ```

Keep under 50 lines. Simple and focused.
  </action>
  <verify>File exists at packages/arios-cli/templates/.claude/commands/arios/status.md with proper structure</verify>
  <done>The /arios:status command displays project position and suggests next action</done>
</task>

</tasks>

<verification>
- [ ] /arios command file exists and has frontmatter + all template sections
- [ ] /arios shows detection (greenfield/brownfield) before suggesting action
- [ ] /arios requires user confirmation before proceeding
- [ ] /arios:status command file exists with proper structure
- [ ] Both commands reference .arios/STATE.md for state
- [ ] Commands follow PROJECT.md template pattern
</verification>

<success_criteria>
- /arios command detects project type and suggests appropriate next action
- /arios:status shows current position with next step suggestion
- Both commands handle the "no ARIOS project" case gracefully
- Suggestions are inline text, not boxed formatting
- Commands stay lean (under 80 and 50 lines respectively)
</success_criteria>

<output>
After completion, create `.planning/phases/03-entry-points/03-01-SUMMARY.md`
</output>
