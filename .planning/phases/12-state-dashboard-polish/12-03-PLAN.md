---
phase: 12-state-dashboard-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/arios-dashboard/src/client/styles.css
  - packages/arios-dashboard/src/client/index.html
  - packages/arios-dashboard/src/client/app.js
autonomous: true

must_haves:
  truths:
    - "Clicking a task slides panel in from right"
    - "Main view compresses when panel opens"
    - "Panel is resizable via drag handle"
    - "Panel closes on X click or Escape key"
  artifacts:
    - path: "packages/arios-dashboard/src/client/styles.css"
      provides: "Slide-out panel CSS with transform animation"
      contains: "detail-panel"
    - path: "packages/arios-dashboard/src/client/index.html"
      provides: "Panel HTML structure with resizer"
      contains: "detail-panel"
    - path: "packages/arios-dashboard/src/client/app.js"
      provides: "Panel open/close and resize handlers"
      contains: "handleMouseMove"
  key_links:
    - from: "task card click"
      to: "panel opens"
      via: "showTaskDetail function"
      pattern: "detail-panel.*open|addClass.*open"
    - from: "resizer mousedown"
      to: "panel width changes"
      via: "handleMouseMove"
      pattern: "isResizing|newWidth"
---

<objective>
Replace modal with slide-out detail panel that compresses main view, with resizable width.

Purpose: Per CONTEXT.md, users want a slide-out panel (not overlay modal) that compresses the main view. Width should be resizable via drag handle.
Output: CSS for slide-out animation, HTML panel structure, JS for open/close and resize.
</objective>

<execution_context>
@/Users/j.franke/.claude/get-shit-done/workflows/execute-plan.md
@/Users/j.franke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-state-dashboard-polish/12-CONTEXT.md
@.planning/phases/12-state-dashboard-polish/12-RESEARCH.md
@packages/arios-dashboard/src/client/styles.css
@packages/arios-dashboard/src/client/index.html
@packages/arios-dashboard/src/client/app.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add slide-out panel CSS</name>
  <files>packages/arios-dashboard/src/client/styles.css</files>
  <action>
  Replace the existing Modal section with a Detail Panel section.

  Remove or comment out the existing `.modal`, `.modal.open`, `.modal-overlay`, `.modal-content`, etc. styles.

  Add new Detail Panel styles (from RESEARCH.md pattern):
  ```css
  /* ============================================
     Detail Panel (slide-out from right)
     ============================================ */
  .detail-panel {
    position: fixed;
    top: 0;
    right: 0;
    height: 100%;
    width: 400px;
    min-width: 300px;
    max-width: 800px;
    background-color: var(--bg-secondary);
    border-left: 1px solid var(--border);
    transform: translate3d(100%, 0, 0);
    transition: transform var(--transition-normal);
    z-index: 50;
    display: flex;
    flex-direction: column;
  }

  .detail-panel.open {
    transform: translate3d(0, 0, 0);
  }

  /* Resizer handle on left edge */
  .panel-resizer {
    position: absolute;
    left: 0;
    top: 0;
    width: 4px;
    height: 100%;
    cursor: ew-resize;
    background: transparent;
  }

  .panel-resizer:hover,
  .panel-resizer.active {
    background: var(--accent);
  }

  /* Panel header */
  .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--spacing-md) var(--spacing-lg);
    border-bottom: 1px solid var(--border-subtle);
  }

  .panel-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
  }

  .panel-close {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    font-size: 20px;
    cursor: pointer;
    transition: background-color var(--transition-fast), color var(--transition-fast);
  }

  .panel-close:hover {
    background-color: var(--bg-hover);
    color: var(--text-primary);
  }

  /* Panel body */
  .panel-body {
    flex: 1;
    padding: var(--spacing-lg);
    overflow-y: auto;
  }

  /* Main content compression when panel open */
  .main-content {
    transition: margin-right var(--transition-normal);
  }

  .main-content.panel-open {
    margin-right: 400px;
  }
  ```

  Keep the existing `.detail-section`, `.detail-label`, `.detail-value` styles (they work for both modal and panel).
  </action>
  <verify>Read styles.css and confirm `.detail-panel`, `.panel-resizer`, `.main-content.panel-open` styles exist</verify>
  <done>styles.css contains slide-out panel CSS with transform animation and main-content compression</done>
</task>

<task type="auto">
  <name>Task 2: Update HTML structure for panel</name>
  <files>packages/arios-dashboard/src/client/index.html</files>
  <action>
  Replace the modal HTML at the bottom of body with panel HTML.

  Remove:
  ```html
  <!-- Task detail modal -->
  <div class="modal" id="task-modal">
    ...
  </div>
  ```

  Add:
  ```html
  <!-- Task detail panel (slide-out) -->
  <div class="detail-panel" id="detail-panel">
    <div class="panel-resizer" id="panel-resizer"></div>
    <div class="panel-header">
      <h3 class="panel-title" id="panel-title">Task Details</h3>
      <button class="panel-close" id="panel-close" aria-label="Close">&times;</button>
    </div>
    <div class="panel-body" id="panel-body"></div>
  </div>
  ```

  Note: Panel is a sibling of .main-content, not inside it. This allows main-content to compress independently.
  </action>
  <verify>Read index.html and confirm `.detail-panel` element exists with resizer, header, body structure</verify>
  <done>index.html contains detail-panel HTML structure with panel-resizer, panel-header, panel-body</done>
</task>

<task type="auto">
  <name>Task 3: Update app.js for panel behavior and resize</name>
  <files>packages/arios-dashboard/src/client/app.js</files>
  <action>
  Update app.js to handle panel instead of modal.

  1. Update DOM element references in `elements` object:
  ```javascript
  // Replace modal refs with panel refs
  detailPanel: null,
  panelTitle: null,
  panelBody: null,
  panelClose: null,
  panelResizer: null
  ```

  2. Update `initElements()`:
  ```javascript
  // Panel (replaces modal)
  elements.detailPanel = document.getElementById('detail-panel');
  elements.panelTitle = document.getElementById('panel-title');
  elements.panelBody = document.getElementById('panel-body');
  elements.panelClose = document.getElementById('panel-close');
  elements.panelResizer = document.getElementById('panel-resizer');
  elements.mainContent = document.querySelector('.main-content');
  ```

  3. Add panel resize state and handlers:
  ```javascript
  let isResizing = false;
  let startX = 0;
  let startWidth = 0;

  function handleResizeStart(e) {
    isResizing = true;
    startX = e.clientX;
    startWidth = elements.detailPanel.offsetWidth;
    elements.panelResizer.classList.add('active');
    document.addEventListener('mousemove', handleResizeMove);
    document.addEventListener('mouseup', handleResizeEnd);
    e.preventDefault();
  }

  function handleResizeMove(e) {
    if (!isResizing) return;
    const delta = startX - e.clientX;
    const newWidth = Math.max(300, Math.min(800, startWidth + delta));
    elements.detailPanel.style.width = `${newWidth}px`;
    elements.mainContent.style.marginRight = `${newWidth}px`;
  }

  function handleResizeEnd() {
    isResizing = false;
    elements.panelResizer.classList.remove('active');
    document.removeEventListener('mousemove', handleResizeMove);
    document.removeEventListener('mouseup', handleResizeEnd);
  }
  ```

  4. Update `setupEventListeners()`:
  ```javascript
  // Panel handlers (replaces modal)
  elements.panelClose?.addEventListener('click', closePanel);
  elements.panelResizer?.addEventListener('mousedown', handleResizeStart);

  // Escape key closes panel
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && state.selectedTaskId) {
      closePanel();
    }
  });
  ```

  5. Rename modal functions to panel functions:
  ```javascript
  function showTaskDetail(taskId) {
    const task = state.tasks.find(t => t.id === taskId);
    if (!task) return;

    state.selectedTaskId = taskId;

    if (elements.panelTitle) {
      elements.panelTitle.textContent = task.name || `Task ${task.id}`;
    }

    if (elements.panelBody) {
      elements.panelBody.innerHTML = renderTaskDetailHTML(task);
    }

    // Open panel and compress main content
    elements.detailPanel?.classList.add('open');
    elements.mainContent?.classList.add('panel-open');
  }

  function closePanel() {
    state.selectedTaskId = null;
    elements.detailPanel?.classList.remove('open');
    elements.mainContent?.classList.remove('panel-open');
    // Reset panel width to default
    elements.detailPanel.style.width = '';
    elements.mainContent.style.marginRight = '';
  }
  ```

  6. Keep `renderTaskDetailHTML` function unchanged - it works for panel too.

  7. Update exports if needed:
  ```javascript
  export { state, render, setView, setTab, showTaskDetail, closePanel };
  ```
  </action>
  <verify>Run `cd packages/arios-dashboard && npm run build` (if build exists) or check syntax. Start dashboard and click a task to verify panel slides in and is resizable.</verify>
  <done>app.js handles detail panel open/close with main content compression and panel resize via drag handle</done>
</task>

</tasks>

<verification>
- styles.css contains .detail-panel with transform animation
- index.html contains detail-panel element with resizer
- app.js has panel open/close and resize handlers
- Panel slides in from right when clicking task
- Main content compresses when panel opens
- Panel is resizable between 300px and 800px
- Escape key closes panel
</verification>

<success_criteria>
- DASH-01 addressed: Click-for-details interaction uses slide-out panel
- Panel compresses main view per CONTEXT.md decision
- Width is resizable via drag handle
- Width resets on close (not persisted across sessions per CONTEXT.md)
</success_criteria>

<output>
After completion, create `.planning/phases/12-state-dashboard-polish/12-03-SUMMARY.md`
</output>
