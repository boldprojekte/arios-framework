---
phase: 06-task-visibility
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/arios-dashboard/src/client/index.html
  - packages/arios-dashboard/src/client/styles.css
  - packages/arios-dashboard/src/client/app.js
autonomous: true

must_haves:
  truths:
    - "Dashboard opens in browser and shows sidebar with tabs"
    - "Sidebar collapses/expands on click"
    - "Connection status indicator shows green when connected"
    - "View toggle switches between Kanban and List modes"
    - "Dashboard has dark theme with Linear-inspired styling"
  artifacts:
    - path: "packages/arios-dashboard/src/client/index.html"
      provides: "Dashboard HTML structure"
      contains: "<aside"
    - path: "packages/arios-dashboard/src/client/styles.css"
      provides: "Linear-inspired dark theme"
      contains: "--bg-primary"
    - path: "packages/arios-dashboard/src/client/app.js"
      provides: "Core dashboard logic and EventSource connection"
      contains: "EventSource"
  key_links:
    - from: "packages/arios-dashboard/src/client/app.js"
      to: "/events"
      via: "EventSource connection"
      pattern: "EventSource.*events"
    - from: "packages/arios-dashboard/src/client/index.html"
      to: "packages/arios-dashboard/src/client/styles.css"
      via: "stylesheet link"
      pattern: "href.*styles.css"
---

<objective>
Build the dashboard HTML structure, CSS styling, and core JavaScript for EventSource connection and state management.

Purpose: This is the visible foundation of the dashboard. Users will see the layout, navigate with the sidebar, and the SSE connection will power all real-time updates.
Output: A functional dashboard shell that connects to the server and manages state.
</objective>

<execution_context>
@/Users/j.franke/.claude/get-shit-done/workflows/execute-plan.md
@/Users/j.franke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/06-task-visibility/06-CONTEXT.md
@.planning/phases/06-task-visibility/06-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard HTML structure</name>
  <files>packages/arios-dashboard/src/client/index.html</files>
  <action>
Create single-page HTML dashboard:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ARIOS Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h1 class="logo">ARIOS</h1>
        <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
          <!-- Chevron icon -->
        </button>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-item active" data-tab="tasks">Tasks</button>
        <button class="nav-item" data-tab="roadmap">Roadmap</button>
      </nav>
      <div class="sidebar-footer">
        <div class="connection-status" id="connection-status">
          <span class="status-dot"></span>
          <span class="status-text">Connecting...</span>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main class="main-content">
      <header class="content-header">
        <div class="header-left">
          <h2 class="page-title" id="page-title">Tasks</h2>
          <span class="phase-indicator" id="phase-indicator">Phase 0 of 0</span>
        </div>
        <div class="header-right">
          <div class="view-toggle" id="view-toggle" data-view="kanban">
            <button class="toggle-btn active" data-view="kanban">Kanban</button>
            <button class="toggle-btn" data-view="list">List</button>
          </div>
        </div>
      </header>

      <!-- Tasks view -->
      <section class="view tasks-view active" id="tasks-view">
        <!-- Kanban board (default) -->
        <div class="kanban-board" id="kanban-board">
          <div class="kanban-column" data-status="pending">
            <h3 class="column-header">Pending</h3>
            <div class="column-content" id="pending-tasks"></div>
          </div>
          <div class="kanban-column" data-status="in-progress">
            <h3 class="column-header">In Progress</h3>
            <div class="column-content" id="in-progress-tasks"></div>
          </div>
          <div class="kanban-column" data-status="complete">
            <h3 class="column-header">Complete</h3>
            <div class="column-content" id="complete-tasks"></div>
          </div>
        </div>
        <!-- List view (hidden by default) -->
        <div class="list-view hidden" id="list-view">
          <div class="list-content" id="list-content"></div>
        </div>
      </section>

      <!-- Roadmap view -->
      <section class="view roadmap-view" id="roadmap-view">
        <div class="roadmap-content" id="roadmap-content"></div>
      </section>
    </main>

    <!-- Task detail modal -->
    <div class="modal" id="task-modal">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <button class="modal-close" aria-label="Close">&times;</button>
        <div class="modal-body" id="modal-body"></div>
      </div>
    </div>
  </div>

  <script src="app.js" type="module"></script>
</body>
</html>
```

Structure follows CONTEXT.md decisions:
- Sidebar with tabs (Tasks, Roadmap)
- Collapsible sidebar
- Connection status indicator
- View toggle (Kanban/List)
- Modal for task details
  </action>
  <verify>`cat packages/arios-dashboard/src/client/index.html | grep -c "aside\|main\|modal"` shows 3+ matches</verify>
  <done>HTML structure complete with sidebar, main content, and modal</done>
</task>

<task type="auto">
  <name>Task 2: Create Linear-inspired dark theme CSS</name>
  <files>packages/arios-dashboard/src/client/styles.css</files>
  <action>
Create CSS with Linear-inspired dark theme per RESEARCH.md Pattern 4:

1. CSS Custom Properties (root variables):
```css
:root {
  /* Linear-inspired dark palette */
  --bg-primary: #0d0d0d;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #262626;
  --bg-hover: #333333;
  --text-primary: #fafafa;
  --text-secondary: #a3a3a3;
  --text-muted: #737373;
  --accent: #7c5cff;
  --accent-dim: rgba(124, 92, 255, 0.1);
  --border: #333333;
  --border-subtle: #262626;
  --success: #22c55e;
  --warning: #eab308;
  --error: #ef4444;
  --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);

  /* Spacing */
  --sidebar-width: 240px;
  --sidebar-collapsed: 60px;
  --header-height: 56px;
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 250ms ease;
}
```

2. Base styles:
- Reset defaults, box-sizing border-box
- Body: bg-primary, text-primary, font-family system stack
- Scrollbar styling (thin, dark)

3. Dashboard layout:
- Flex container, full viewport height
- Sidebar fixed width, collapsible with transform
- Main content fills remaining space

4. Sidebar:
- Sticky, full height
- Logo, nav items with hover states
- Connection status with colored dot (green/red/yellow)
- Collapse animation with sidebar-collapsed class

5. Header:
- Phase indicator, view toggle
- Toggle buttons with active state

6. Kanban board:
- 3-column grid (pending, in-progress, complete)
- Column headers with status colors
- Responsive: stack on mobile

7. Task cards:
- Card styling with hover effect
- Status badge
- Dependencies indicator
- Subtle update animation (@keyframes highlight-fade)

8. List view:
- Table-like rows
- Alternating backgrounds

9. Modal:
- Centered overlay
- Slide-up animation
- Close button

10. Utility classes:
- .hidden { display: none }
- .active for nav/toggle items
- .updated for highlight animation
  </action>
  <verify>`cat packages/arios-dashboard/src/client/styles.css | grep -c "var(--"` shows 20+ CSS variable usages</verify>
  <done>Dark theme CSS with all component styles and animations</done>
</task>

<task type="auto">
  <name>Task 3: Create core JavaScript with EventSource</name>
  <files>packages/arios-dashboard/src/client/app.js</files>
  <action>
Create core dashboard JavaScript (vanilla JS, no framework):

1. State management:
```javascript
const state = {
  tasks: [],
  phases: [],
  currentPhase: 0,
  currentPlan: 0,
  roadmap: '',
  connectionStatus: 'disconnected',
  currentView: 'kanban',
  currentTab: 'tasks'
};
```

2. EventSource connection:
```javascript
function connectSSE() {
  const eventSource = new EventSource('/events');

  eventSource.onopen = () => {
    state.connectionStatus = 'connected';
    updateConnectionStatus();
  };

  eventSource.onmessage = (event) => {
    const message = JSON.parse(event.data);
    handleMessage(message);
  };

  eventSource.onerror = () => {
    state.connectionStatus = 'disconnected';
    updateConnectionStatus();
    // EventSource auto-reconnects
  };
}
```

3. Message handler:
```javascript
function handleMessage(message) {
  if (message.type === 'initial' || message.type === 'update') {
    const { tasks, phases, currentPhase, currentPlan, roadmap } = message.payload;
    state.tasks = tasks;
    state.phases = phases;
    state.currentPhase = currentPhase;
    state.currentPlan = currentPlan;
    state.roadmap = roadmap;
    render();
  }
}
```

4. UI event handlers:
- Sidebar toggle: collapse/expand sidebar
- Tab navigation: switch between Tasks and Roadmap
- View toggle: switch between Kanban and List
- Task click: open detail modal
- Modal close: hide modal

5. Render functions (stubs for now, implemented in next plans):
```javascript
function render() {
  updatePhaseIndicator();
  renderTasks(); // Will call kanban.js or list.js
  renderRoadmap(); // Will call roadmap.js
}
```

6. Export render hooks for view modules:
```javascript
export { state, render };
export function setView(view) { ... }
export function setTab(tab) { ... }
export function showTaskDetail(taskId) { ... }
```

7. Initialize on DOMContentLoaded:
- Attach event listeners
- Connect SSE
- Initial render
  </action>
  <verify>
    `cat packages/arios-dashboard/src/client/app.js | grep EventSource` shows connection
    `cat packages/arios-dashboard/src/client/app.js | grep "function handleMessage"` shows handler
  </verify>
  <done>Core JavaScript handles SSE connection, state management, and UI navigation</done>
</task>

</tasks>

<verification>
1. Open index.html in browser (via server) - layout renders correctly
2. Sidebar collapses/expands on toggle click
3. Tab switching works (Tasks/Roadmap)
4. View toggle switches container visibility
5. Connection status updates based on SSE state
6. Console shows no JavaScript errors
</verification>

<success_criteria>
- HTML renders complete dashboard layout
- CSS applies dark theme with all visual elements
- JavaScript connects to SSE and receives messages
- Sidebar navigation works
- View toggle works
- Connection status indicator updates
- No console errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-task-visibility/06-03-SUMMARY.md`
</output>
