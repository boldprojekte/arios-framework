---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/arios-cli/package.json
  - packages/arios-cli/tsconfig.json
  - packages/arios-cli/src/index.ts
  - packages/arios-cli/templates/.arios/system.md
  - packages/arios-cli/templates/.arios/config.json.hbs
  - packages/arios-cli/templates/.claude/commands/arios/start.md
  - packages/arios-cli/templates/.claude/commands/arios/update.md
  - packages/arios-cli/templates/CLAUDE.md.hbs
autonomous: true

must_haves:
  truths:
    - "CLI package has valid package.json with bin entry pointing to compiled output"
    - "TypeScript compiles without errors"
    - "Template files exist for all ARIOS installation artifacts"
    - "Slash command templates follow Claude Code format"
  artifacts:
    - path: "packages/arios-cli/package.json"
      provides: "npm package manifest with bin, dependencies, scripts"
      contains: "\"bin\":"
    - path: "packages/arios-cli/tsconfig.json"
      provides: "TypeScript config for Node.js ESM"
      contains: "\"module\": \"NodeNext\""
    - path: "packages/arios-cli/src/index.ts"
      provides: "CLI entry point with commander"
      exports: ["main"]
    - path: "packages/arios-cli/templates/.arios/system.md"
      provides: "Core ARIOS instructions loaded via @import"
      min_lines: 20
    - path: "packages/arios-cli/templates/.claude/commands/arios/start.md"
      provides: "/arios:start slash command"
      contains: "---"
  key_links:
    - from: "packages/arios-cli/package.json"
      to: "dist/index.js"
      via: "bin entry"
      pattern: "\"bin\".*index\\.js"
---

<objective>
Create the CLI package structure and template files for ARIOS installation.

Purpose: Establish the npm package that delivers ARIOS via `npx arios init`, including all template files that will be copied to user projects.

Output: A compilable TypeScript CLI package with templates for `.arios/`, `.claude/commands/arios/`, and CLAUDE.md integration.
</objective>

<execution_context>
@/Users/j.franke/.claude/get-shit-done/workflows/execute-plan.md
@/Users/j.franke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CLI package structure</name>
  <files>
    packages/arios-cli/package.json
    packages/arios-cli/tsconfig.json
    packages/arios-cli/src/index.ts
  </files>
  <action>
Create the npm package structure for the ARIOS CLI:

1. **package.json** with:
   - name: "arios" (for `npx arios`)
   - type: "module" (ESM)
   - bin: { "arios": "./dist/index.js" }
   - scripts: build (tsc), dev (tsx src/index.ts)
   - dependencies: commander@12.x, chalk@5.x, fs-extra@11.x, ora@8.x
   - devDependencies: typescript@5.x, @types/node, @types/fs-extra, tsx

2. **tsconfig.json** for Node.js ESM:
   - target: ES2022
   - module: NodeNext
   - moduleResolution: NodeNext
   - outDir: dist
   - rootDir: src
   - strict: true

3. **src/index.ts** - CLI entry point:
   - Shebang: #!/usr/bin/env node
   - Import commander, set up program with name "arios", version "0.1.0"
   - Add "init" command (handler will be implemented in plan 02)
   - Add "update" command (handler will be implemented in plan 02)
   - Call program.parse()
   - For now, commands can just log "Not implemented yet"

Do NOT run npm install yet - that happens in plan 02.
  </action>
  <verify>
    - package.json exists with correct bin entry
    - tsconfig.json exists with NodeNext module resolution
    - src/index.ts exists with commander setup
    - File structure: packages/arios-cli/{package.json,tsconfig.json,src/index.ts}
  </verify>
  <done>CLI package scaffolding complete with placeholder commands</done>
</task>

<task type="auto">
  <name>Task 2: Create ARIOS system templates</name>
  <files>
    packages/arios-cli/templates/.arios/system.md
    packages/arios-cli/templates/.arios/config.json.hbs
    packages/arios-cli/templates/CLAUDE.md.hbs
  </files>
  <action>
Create the template files that will be copied to user projects:

1. **templates/.arios/system.md** - Core ARIOS instructions:
   - Brief system prompt explaining ARIOS is an AI workflow assistant
   - Reference to available commands: /ideate, /plan, /execute
   - Philosophy: understand intent before building, professional output
   - Keep under 50 lines - this is the main file loaded via @import
   - Do NOT include implementation details (those come in later phases)

2. **templates/.arios/config.json.hbs** - Project config template:
   - Handlebars template with variables: {{projectName}}, {{stack}}, {{typescript}}
   - version field
   - detected object: { type, typescript, packageManager }
   - preferences object: { workflow: "interactive" }
   - Stack defaults to "unknown" if not detected

3. **templates/CLAUDE.md.hbs** - CLAUDE.md template or append block:
   - Handlebars template with {{projectName}}, {{projectDescription}}
   - Maximum 5 lines for ARIOS section
   - Format:
     ```
     ## ARIOS
     This project uses ARIOS for AI-assisted development.
     See @.arios/system.md for workflow commands.
     ```
   - Include comment markers so init can detect if ARIOS already added

Use .hbs extension for files that need variable substitution, .md for static files.
  </action>
  <verify>
    - templates/.arios/system.md exists and is under 50 lines
    - templates/.arios/config.json.hbs has {{projectName}} variable
    - templates/CLAUDE.md.hbs has ARIOS section template
    - wc -l on system.md returns < 50
  </verify>
  <done>ARIOS system templates ready for installation</done>
</task>

<task type="auto">
  <name>Task 3: Create slash command templates</name>
  <files>
    packages/arios-cli/templates/.claude/commands/arios/start.md
    packages/arios-cli/templates/.claude/commands/arios/update.md
  </files>
  <action>
Create the slash command templates that enable /arios:start and /arios:update:

1. **templates/.claude/commands/arios/start.md** - /arios:start command:
   - Frontmatter: description, model (optional), tools
   - Purpose: Complete ARIOS setup inside Claude Code
   - Instructions:
     1. Detect project type (check package.json, requirements.txt, etc.)
     2. Store detection in .arios/config.json
     3. Offer to enhance CLAUDE.md with detected stack info (optional)
     4. Confirm setup complete
   - Output format: summary of what was configured
   - Mark hooks configuration as "TBD - future phase"

2. **templates/.claude/commands/arios/update.md** - /arios:update command:
   - Frontmatter: description, model (optional), tools
   - Purpose: Update ARIOS to latest version
   - Instructions:
     1. Check current version in .arios/config.json
     2. Show what's new (changelog approach like GSD)
     3. Ask for confirmation before applying
     4. Update files, preserve user customizations in config
   - Note: Actual update mechanism TBD (this is the interface)

Follow the Input-Workflow-Output template from PROJECT.md. Keep each command focused and under 40 lines.
  </action>
  <verify>
    - start.md exists with valid frontmatter (--- delimited)
    - update.md exists with valid frontmatter
    - Both files follow the slash command template structure
    - wc -l on each file returns < 50
  </verify>
  <done>Slash command templates ready for installation</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Directory structure exists: packages/arios-cli/{package.json,tsconfig.json,src/,templates/}
2. All template files created in templates/ directory
3. No syntax errors in TypeScript (basic parse check)
4. Template files use correct handlebars syntax where needed
</verification>

<success_criteria>
- CLI package structure matches standard npm package conventions
- Templates are ready to be copied by init command (plan 02)
- All files under line count limits (system.md < 50, commands < 50)
- Package can be imported without errors (after npm install in plan 02)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
