---
phase: 05-execution-flow
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/arios-cli/templates/.claude/commands/arios/ideate.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "User is prompted to choose approach (ground-up, balanced, ui-first) on first /ideate"
    - "Chosen approach is persisted to .planning/config.json"
    - "Subsequent /ideate runs skip approach selection if already set"
  artifacts:
    - path: "packages/arios-cli/templates/.claude/commands/arios/ideate.md"
      provides: "Approach selection integration"
      contains: "Read tool.*config.json|Write tool.*config.json"
  key_links:
    - from: "ideate.md"
      to: ".planning/config.json"
      via: "Read tool check + Write tool persist"
      pattern: "Read tool|Write tool|config\\.json|approach"
---

<objective>
Wire approach selection into /arios:ideate command.

Purpose: Close gap where approach selection API exists but no UI presents choice to user. Users should be able to choose ground-up, balanced, or ui-first approach at project start.

Output: Updated ideate.md command that prompts user for approach on first ideation.
</objective>

<execution_context>
@/Users/j.franke/.claude/get-shit-done/workflows/execute-plan.md
@/Users/j.franke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/arios-cli/templates/.claude/commands/arios/ideate.md
@packages/arios-cli/src/config/approach.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add approach selection to ideate command</name>
  <files>packages/arios-cli/templates/.claude/commands/arios/ideate.md</files>
  <action>
Update the /arios:ideate command to include approach selection workflow:

1. Add to Variables section:
   - Reference .planning/config.json for approach settings

2. Add to Instructions section:
   - On first project ideation (no approach set), offer approach selection
   - Show three options with descriptions:
     * ground-up: Foundation first (data models, business logic, then UI)
     * balanced (default): Interleave UI and logic as each feature requires
     * ui-first: Visual mockups with stub data first, then wire real data
   - After selection, persist to config.json
   - Skip selection if approach already set

3. Update Workflow section:
   - After step 2 (Read STATE.md), insert new step 3:
     **Check if approach is set:**
     ```
     Use Read tool to check .planning/config.json:
     - If file exists, look for "approach" field
     - If approach field exists and has value: skip selection
     - If no approach set:
       1. Present approach selection prompt (see below)
       2. Wait for user choice
       3. Use Write tool to update .planning/config.json:
          - Read current content (or start with {})
          - Add/update "approach" field with user's choice
          - Write back the updated JSON
       4. Acknowledge: "Approach set to: {choice}"
     ```
   - Renumber subsequent steps

4. Add approach guidance to Report section:
   - Include current approach in status output

**Execution mechanism (CRITICAL):**
The ideate.md template instructs Claude to use its available tools:
- **Read tool**: Check .planning/config.json for existing approach
- **Write tool**: Persist user's approach selection to .planning/config.json

This is NOT TypeScript imports - Claude reads and writes JSON directly using its tools.

Example approach selection prompt:
```
Before we begin ideation, let's set your development approach:

1. **ground-up** - Build foundation first (data models → business logic → API → UI)
2. **balanced** - Interleave UI and logic as each feature requires (default)
3. **ui-first** - Visual mockups with stub data first, then wire real data

Which approach? (1/2/3 or name):
```

Example config.json write:
```json
{
  "approach": "balanced",
  "projectName": "my-app"
}
```
  </action>
  <verify>
Read the updated ideate.md file and confirm:
- Workflow step 3 specifies using Read tool to check config.json
- Workflow step 3 specifies using Write tool to persist selection
- Instructions mention checking for approach field in config.json
- Report section includes approach in status
  </verify>
  <done>
ideate.md command template updated with approach selection workflow using Read/Write tools to check and persist approach in config.json
  </done>
</task>

</tasks>

<verification>
1. Read packages/arios-cli/templates/.claude/commands/arios/ideate.md
2. Verify approach selection workflow step exists
3. Verify three approach options (ground-up, balanced, ui-first) are documented with descriptions
4. Verify persistence mention (config.json)
5. Verify skip logic for already-set approach
</verification>

<success_criteria>
- ideate.md includes approach selection workflow step
- Three approaches documented with descriptions matching approach.ts
- First ideation triggers selection, subsequent runs skip it
- Approach shown in status output
</success_criteria>

<output>
After completion, create `.planning/phases/05-execution-flow/05-06-SUMMARY.md`
</output>
