---
phase: 08-parallel-execution
plan: 03
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - packages/arios-cli/templates/.claude/commands/arios/orchestrate.md
  - packages/arios-cli/templates/.claude/commands/arios/execute.md
autonomous: true

must_haves:
  truths:
    - "Dashboard server confirmed running before execution starts"
    - "Wave announcements are minimal: single line start, summary on complete"
    - "Dashboard link posted once, user clicks if they want it"
  artifacts:
    - path: "packages/arios-cli/templates/.claude/commands/arios/orchestrate.md"
      provides: "Dashboard coordination and minimal announcements"
      contains: "Dashboard server"
    - path: "packages/arios-cli/templates/.claude/commands/arios/execute.md"
      provides: "Dashboard link on execution start"
      contains: "localhost:3456"
  key_links:
    - from: "orchestrate.md"
      to: "dashboard server"
      via: "port probe and spawn"
      pattern: "curl.*3456|npx.*dashboard"
---

<objective>
Add dashboard coordination and minimal progress announcements per CONTEXT.md decisions.

Purpose: User monitors parallel execution via dashboard (primary view), chat gets minimal announcements only. Dashboard server must be running for monitoring to work.

Output: Dashboard startup coordination, minimal wave announcements
</objective>

<execution_context>
@/Users/j.franke/.claude/get-shit-done/workflows/execute-plan.md
@/Users/j.franke/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-parallel-execution/08-CONTEXT.md
@.planning/phases/08-parallel-execution/08-RESEARCH.md
@packages/arios-cli/templates/.claude/commands/arios/orchestrate.md
@packages/arios-cli/templates/.claude/commands/arios/execute.md
@.planning/phases/06-task-visibility/06-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add dashboard coordination to orchestrator</name>
  <files>packages/arios-cli/templates/.claude/commands/arios/orchestrate.md</files>
  <action>
Add dashboard server coordination at the start of execution flow.

Per CONTEXT.md:
- "Dashboard is the primary view for monitoring parallel execution"
- "Dashboard server must be running for link to work (orchestrator ensures this)"
- "No auto-open dashboard - just post the link, user clicks if they want it"

Add new section after "## Variables" and before "## Context":

```markdown
## Dashboard Coordination

**Before starting execution, ensure dashboard server is running:**

1. **Probe dashboard port:**
   ```
   Use Bash tool:
   command: "curl -s -o /dev/null -w '%{http_code}' http://localhost:3456 || echo 'not_running'"
   timeout: 3000
   ```

2. **If not running (response != 200), start it:**
   ```
   Use Bash tool:
   command: "npx tsx packages/arios-dashboard/src/server.ts"
   run_in_background: true
   timeout: 5000
   ```
   Wait 2 seconds for server to initialize.

3. **Verify it's now running:**
   ```
   Use Bash tool:
   command: "curl -s -o /dev/null -w '%{http_code}' http://localhost:3456"
   timeout: 3000
   ```
   If still not running, log warning but continue (dashboard is nice-to-have, not required).

4. **Post dashboard link once at execution start:**
   ```
   Dashboard: http://localhost:3456
   ```

**Note:** Dashboard is NOT auto-opened. User clicks link if they want visual monitoring. Some users prefer CLI-only.
```

Also update the "## Workflow" section step 5 (execution) to reference this:

After step 5 intro "If execution needed:", add:
```
   - **Ensure dashboard running (see Dashboard Coordination section above)**
   - Post dashboard link once: "Dashboard: http://localhost:3456"
```
  </action>
  <verify>grep -q "Dashboard Coordination" packages/arios-cli/templates/.claude/commands/arios/orchestrate.md && grep -q "localhost:3456" packages/arios-cli/templates/.claude/commands/arios/orchestrate.md</verify>
  <done>orchestrate.md ensures dashboard is running before execution</done>
</task>

<task type="auto">
  <name>Task 2: Update wave announcements to minimal format</name>
  <files>packages/arios-cli/templates/.claude/commands/arios/orchestrate.md</files>
  <action>
Update wave progress announcements to minimal format per CONTEXT.md decisions.

Per CONTEXT.md:
- "Claude Code chat gets minimal announcements only"
- "Wave start: Single line - 'Starting wave 2 (4 tasks)'"
- "Wave complete: Summary with counts - 'Wave 2 complete: 4/4 tasks passed'"

Update the "### Wave Execution Pattern" section:

Find the existing report sections and replace with minimal format:

```markdown
### Wave Execution Pattern

**For each wave in schedule:**

1. **Pre-load content** (see inlined content pattern above)

2. **Announce wave start (MINIMAL - single line):**
   ```
   Starting wave {N} ({plan_count} plans)
   ```
   No detailed breakdown. User has dashboard for details.

3. **Spawn wave-executors** (parallel or sequential)

4. **Collect results** (let all finish)

5. **Announce wave completion (MINIMAL - summary only):**
   ```
   Wave {N} complete: {passed}/{total} plans passed
   ```
   If failures:
   ```
   Wave {N} complete: {passed}/{total} plans passed
   Failed: {plan_id_1}, {plan_id_2}
   ```

6. **Silent verification** (Phase 9 - no announcement unless issues found)

7. **Proceed to next wave** (no pause, no confirmation)
```

Also update the "## Report" section at the bottom to match minimal style:

Replace the detailed report format with:
```markdown
## Report

**During execution (per wave):**
```
Starting wave {N} ({count} plans)
[execution happens]
Wave {N} complete: {passed}/{total} plans passed
```

**On completion:**
```
## Phase Execution Complete

Waves: {completed}/{total}
Plans: {passed}/{total}
Duration: {time}

Dashboard: http://localhost:3456 (for detailed review)

Next: {suggested action}
```

**On failure (after recovery exhausted):**
```
## Phase Execution Blocked

Wave {N} failed after 3 recovery attempts.
Error: {brief description}

Options: Debug (d), Skip (s), Abort (a)
```

**Detailed progress is in the dashboard.** Chat stays clean for user to see orchestrator actions clearly.
```

This reduces chat noise during parallel execution.
  </action>
  <verify>grep -q "Starting wave" packages/arios-cli/templates/.claude/commands/arios/orchestrate.md && grep -q "MINIMAL" packages/arios-cli/templates/.claude/commands/arios/orchestrate.md</verify>
  <done>Wave announcements follow minimal format from CONTEXT.md</done>
</task>

<task type="auto">
  <name>Task 3: Add dashboard link to execute command</name>
  <files>packages/arios-cli/templates/.claude/commands/arios/execute.md</files>
  <action>
Add dashboard link display at execution start in the execute command.

The execute command orchestrates the overall flow. Add dashboard link display there too so users see it regardless of entry point.

Find the section where execution starts (after complexity analysis, before spawning orchestrator) and add:

```markdown
## Execution Start

**After complexity analysis, before spawning orchestrator:**

1. Display execution summary:
   ```
   ## Starting Execution

   Phase: {phase_name}
   Complexity: {level}
   Plans: {count} in {wave_count} waves

   Dashboard: http://localhost:3456

   Delegating to orchestrator...
   ```

2. Spawn orchestrator (existing pattern)
```

Also update the workflow section to include this dashboard link step.

This ensures users see the dashboard link early, even if they /execute directly without going through /arios.
  </action>
  <verify>grep -q "Dashboard.*localhost:3456" packages/arios-cli/templates/.claude/commands/arios/execute.md</verify>
  <done>execute.md displays dashboard link at execution start</done>
</task>

</tasks>

<verification>
1. orchestrate.md has "Dashboard Coordination" section
2. orchestrate.md probes port and starts server if needed
3. orchestrate.md uses minimal wave announcement format
4. execute.md displays dashboard link at start
5. No auto-open browser (just link posted)
</verification>

<success_criteria>
- Dashboard server started if not running
- Dashboard link posted once (not repeated each wave)
- Wave start: single line "Starting wave N (X plans)"
- Wave complete: summary "Wave N complete: X/Y passed"
- Dashboard visible as monitoring option, not forced
</success_criteria>

<output>
After completion, create `.planning/phases/08-parallel-execution/08-03-SUMMARY.md`
</output>
